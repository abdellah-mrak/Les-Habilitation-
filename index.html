<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة التأهيلات</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/tabletop@1.5.5/src/tabletop.min.js"></script>
    <style>
        /* نفس CSS الذي قدمته */
    </style>
</head>
<body>
    <!-- Bouton de déconnexion -->
    <button class="logout-button" onclick="logout()">Déconnexion</button>

    <!-- Formulaire de connexion -->
    <div class="login-container" id="loginContainer">
        <h2>Se connecter</h2>
        <input type="email" id="email" placeholder="Adresse e-mail">
        <input type="password" id="password" placeholder="Mot de passe">
        <button onclick="login()">Se connecter</button>
        <p id="loginMessage" style="color: red;"></p>
    </div>

    <div class="container">
        <!-- شريط البحث -->
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="....Rechercher ici">
        </div>

        <!-- القائمة -->
        <nav class="menu">
            <!-- الروابط كما هي -->
        </nav>

        <!-- الجدول -->
        <div class="table-container">
            <table id="habilitationsTable">
                <thead>
                    <tr>
                        <th id="tableHeader">Habilitation</th>
                        <th>Tel</th>
                        <th>NomPrénom</th>
                        <th>Matricule</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- أضف المزيد من الصفوف حسب الحاجة -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Données de connexion
        const validEmail = 'abdellah.m\'rak23@ump.ac.ma';
        const validPassword = 'Abde@2006';

        function showLogin() {
            document.getElementById('loginContainer').style.display = 'block';
        }

        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const message = document.getElementById('loginMessage');

            if (email === validEmail && password === validPassword) {
                document.getElementById('loginContainer').style.display = 'none';
                document.querySelector('.container').style.display = 'block'; // Afficher le contenu du site après la connexion
            } else {
                message.textContent = 'L\'adresse e-mail ou le mot de passe est incorrect';
            }
        }

        function logout() {
            location.reload(); // Recharger la page pour afficher le formulaire de connexion
        }

        // Afficher le formulaire de connexion au chargement de la page
        window.onload = showLogin;

        // Code pour la gestion des clics على الروابط في القائمة وتحديث الجدول
        document.querySelectorAll('.menu a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const title = this.getAttribute('data-title');
                const header = this.getAttribute('data-header');

                document.title = title;
                document.getElementById('tableHeader').innerText = header;

                document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
                this.classList.add('active');

                const tableBody = document.getElementById('tableBody');
                tableBody.innerHTML = '';

                (data[header] || []).forEach(row => {
                    const tr = document.createElement('tr');
                    row.forEach(cell => {
                        const td = document.createElement('td');
                        td.textContent = cell;
                        tr.appendChild(td);
                    });
                    tableBody.appendChild(tr);
                });
            });
        });

        document.querySelector('.menu a[data-title="Accueil"]').click();
    </script>
    
    <script src="fetchData.js"></script>
</body>
</html>
